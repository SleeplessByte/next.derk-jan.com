---
import Layout from "../../layouts/Layout.astro";
import "../../styles/transitions.css";

const { title, "slides-class": slidesClass } = Astro.props;
const currentPath = Astro.url.pathname;
---

<Layout
  title={title
    ? `${title} Â· Embrace the Patch: Talk, on Code in Bits and Pieces`
    : "Embrace the Patch: Talk, on Code in Bits and Pieces"}
  class="slide-wrapper"
>
  <header>
    <a href="#content" class="skip-link">
      <span>Skip to main content</span>
    </a>
    {
      currentPath === "/talks/embrace-the-patch" ? (
        <nav
          class={`${
            currentPath !== "/talks/embrace-the-patch" ? "opacity-20" : ""
          }`}
        >
          <a href="/talks" class="back-link">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class=""
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                clip-rule="evenodd"
              />
            </svg>
            <span>Back to all talks</span>
          </a>
        </nav>
      ) : null
    }
  </header>

  <h1 class="sr-only">Talk: Embrace the Patch</h1>

  <p class="sr-only">
    This talk consists of multiple slides, each contained within its own
    section. Each section has a link at the end to the next section.
  </p>

  <main id="content" class={`${slidesClass ?? "fixed-slides"}`}>
    <slot />
  </main>
</Layout>

<script is:inline>
  window.addEventListener("keypress", (event) => {
    if (event.key == "n") {
      document.querySelector('main a[rel="next"]')?.click();
    } else if (event.key == "b") {
      history.back();
    }
  });
</script>
