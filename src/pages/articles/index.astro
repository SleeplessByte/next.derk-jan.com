---
import { getCollection, getEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import StaticDate from "../../components/StaticDate";

const articles = (await getCollection("articles")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<Layout title="Articles">
  <main id="content" class="mx-auto w-full max-w-5xl px-5 py-8">
    <header class="px-4">
      <h1 class="text-5xl font-bold">Articles on Bits and Pieces</h1>
      <p class="text-xl mt-1">Articles by Derk-Jan Karrenbeld</p>
    </header>

    <section class="px-4 mt-12">
      <a href="/talks">Looking for talks instead?</a>
    </section>

    <ol class="mt-12 space-y-6" role="list">
      {
        articles.map((article) => (
          <li>
            <article class="transition p-4 focus-within:ring-2 focus-within:ring-pink-500 dark:focus-within:ring-yellow-500 max-w-2xl rounded-md">
              <header>
                <h2>
                  <a
                    href={`/articles/${article.id}`}
                    class="text-3xl font-semibold no-underline focus:outline-none"
                    aria-describedby={`${article.id}-description`}
                    prefetch="intent"
                  >
                    {article.data.title}
                  </a>
                </h2>
                <span class="text-zinc-600 dark:text-zinc-400">
                  <StaticDate
                    date={article.data.date}
                    aria-label="Published on "
                  />
                </span>
              </header>
              <p id={`${article.id}-description`} class="mt-2 text-xl">
                {article.data.description}
              </p>
            </article>
          </li>
        ))
      }
    </ol>
  </main>
</Layout>
